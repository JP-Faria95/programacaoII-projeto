-- AQUI VÃO TODOS OS SCRIPTS USADOS NA CRIAÇÃO DAS TABELAS, COLUNAS, CONSTRAINTS --

--1) TABELA CATEGORIAS

    -- 1.1) VERSÃO MYSQL

        CREATE TABLE CATEGORIAS(
            ID_CATEGORIA INT PRIMARY KEY AUTO_INCREMENT,
            CATEGORIA VARCHAR(100) NOT NULL,
            ATIVO CHAR(1) ENUM ('N','S') NOT NULL
        )

    -- 1.2) VERSÃO ORACLE

        CREATE TABLE CATEGORIAS (
            ID_CATEGORIA NUMBER GENERATED BY DEFAULT AS INDENTITY PRIMARY KEY,
            CATEGORIA VARCHAR2(100) NOT NULL,
            ATIVO CHAR(1) NOT NULL,

            CONSTRAINT CK_ATIVO_CATEGORIAS CHECK (ATIVO IN ('N','S'))
        )


-- 2) TABELA PRODUTOS

    -- 2.1) VERSÃO MYSQL

        CREATE TABLE PRODUTOS(
            ID_PRODUTO INT PRIMARY KEY AUTO_INCREMENT,
            PRODUTO VARCHAR(100) NOT NULL,
            ESTOQUE INT NOT NULL,
            ESTOQUE_DT_ATUAL DATE NOT NULL,
            VALOR INT NOT NULL,
            ATIVO CHAR(1) ENUM ('N','S'),
            ID_CATEGORIA INT NOT NULL
        )

        ALTER TABLE PRODUTOS ADD CONSTRAINT FK_IDCATEGORIA_PRODUTOS FOREIGN KEY (ID_CATEGORIA) REFERENCES CATEGORIAS (ID_CATEGORIA);

    -- 2.2) VERSÃO ORACLE

        CREATE TABLE PRODUTOS(
            ID_PRODUTO NUMBER GENERATED BY DEFAULT AS INDENTITY PRIMARY KEY,
            PRODUTO VARCHAR2(100) NOT NULL,
            ESTOQUE NUMBER NOT NULL,
            ESTOQUE_DT_ATUAL DATE NOT NULL,
            VALOR NUMBER NOT NULL,
            ATIVO CHAR(1) NOT NULL,
            ID_CATEGORIA NUMBER NOT NULL,

            CONSTRAINT CK_ATIVO_PRODUTOS CHECK (ATIVO IN ('N','S')),
            CONSTRAINT FK_IDCATEGORIA_PRODUTOS FOREIGN KEY (ID_CATEGORIA) REFERENCES CATEGORIAS (ID_CATEGORIA)
        )


-- 3) TABELA USUARIOS

    -- 3.1) VERSÃO MYSQL

        CREATE TABLE USUARIOS(
            ID_USUARIO INT PRIMARY KEY AUTO_INCREMENT,
            USUARIO VARCHAR(20) NOT NULL,
            SENHA VARCHAR(20) NOT NULL,
            NOME VARCHAR(100) NOT NULL,
            CPF VARCHAR(11) NOT NULL,
            CELULAR VARCHAR(11) NOT NULL,
            DT_NASC DATE NOT NULL,
            EMAIL VARCHAR(100) NOT NULL,
            TIPO_USER INT ENUM (0,1) NOT NULL -- 1 É ADMIN
        )

    -- 3.2) VERSÃO ORACLE

        CREATE TABLE USUARIOS(
            ID_USUARIO NUMBER GENERATED BY DEFAULT AS INDENTITY PRIMARY KEY,
            USUARIO VARCHAR2(20) NOT NULL,
            SENHA VARCHAR2(20) NOT NULL,
            NOME VARCHAR2(100) NOT NULL,
            CPF NUMBER(11) NOT NULL,
            CELULAR NUMBER(11) NOT NULL,
            DT_NASC DATE NOT NULL,
            EMAIL VARCHAR2(100) NOT NULL
            TIPO_USER NUMBER NOT NULL,

            CONSTRAINT CK_TIPOUSER_USUARIOS CHECK (TIPO_USER IN (0,1))
        )

-- 4) TABELA USUÁRIOS x PRODUTOS

    -- 4.1) VERSÃO MYSQL

        CREATE TABLE USUARIO_PRODUTO(
            ID_USUARIO INT NOT NULL,
            ID_PRODUTO INT NOT NULL,
            QUANTIDADE INT NOT NULL,

            CONSTRAINT FK_IDUSUARIO_USUARIOPRODUTO FOREIGN KEY ID_USUARIO REFERENCES USUARIOS (ID_USUARIO),
            CONSTRAINT FK_IDPRODUTO_USUARIOPRODUTO FOREIGN KEY ID_PRODUTO REFERENCES PRODUTOS (ID_PRODUTO),
            CONSTRAINT PK_IDUSUARIOIDPRODUTO_USUARIOPRODUTO PRIMARY KEY (ID_USUARIO, ID_PRODUTO)
        )

    -- 4.2 VERSÃO ORACLE

        CREATE TABLE USUARIO_PRODUTOS(
            ID_USUARIO NUMBER NOT NULL,
            ID_PRODUTO NUMBER NOT NULL,
            QUANTIDADE NUMBER NOT NULL,

            CONSTRAINT FK_IDUSUARIO_USUARIOPRODUTO FOREIGN KEY ID_USUARIO REFERENCES USUARIOS (ID_USUARIO),
            CONSTRAINT FK_IDPRODUTO_USUARIOPRODUTO FOREIGN KEY ID_PRODUTO REFERENCES PRODUTOS (ID_PRODUTO),
            CONSTRAINT PK_IDUSUARIOIDPRODUTO_USUARIOPRODUTO PRIMARY KEY (ID_USUARIO, ID_PRODUTO)
        )